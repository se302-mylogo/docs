# 界面要求文档

界面是为呈现RESTful API的数据而服务的，因此我们可以按照RESTful API提供的语义来定义对界面的需求。常见的RESTful语义包括：

* C(reate)：创建资源
* R(etrieve): 读取单个资源
* U(pdate): 更新单个资源
* D(elete): 删除单个资源
* L(ist): 获取资源列表

以下列出简表来说明目前仍需要的界面、其对应的RESTful语义与功能。注意，由于学生和教师所具有的权限不同，因此我们会要求对于同一个界面，以学生或以教师用户登录时可能呈现不同的效果。下列表格中N/A表示无权访问，下述路由均为前端路由。

## 课程

|      | 学生                                                     | 教师                                                     |
| ---- | -------------------------------------------------------- | -------------------------------------------------------- |
| C    | N/A                                                      | 创建新的课程                                             |
| R    | 查看课程详情，详见下方                                   | 查看课程详情，详见下方                                   |
| U    | 在课程详情页中显示加入/退出课程按钮                      | 更新课程数据，如简介等                                   |
| D    | N/A`                                                     | 将删除按钮放在课程详情界面，不另外制作单独界面           |
| L    | 查看课程列表，包括我的课程（指用户参加的课程）与全部课程 | 查看课程列表，包括我的课程（指用户开设的课程）与全部课程 |

### 创建课程

* 路由：`/courses/add` ，注意该路由配置优先级需高于R的路由。
* 教师创建的课程将自动归属于该用户名下

### 查看课程详情

* 该界面包含一系列子界面。用户从课程列表点击进入课程详情界面时，应当首先进入课程简介页面，展示课程封面、授课教师、课程介绍等内容。从课程简介界面用户可以进入课程用户列表界面，它显示所有参与该课程的用户列表；以及课程作业列表界面，它显示所有属于该课程的作业。
* 课程与用户间存在对应关系。课程简介页面需要根据用户与课程的对应关系展示/隐藏特定功能入口，如下表所示：

|                                       | 学生                                                         | 教师                                                         |
| ------------------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 课程为当前登录的学生参加/教师开设课程 | 显示课程用户列表、课程作业列表界面入口，隐藏加入课程按钮并显示退出课程按钮 | 显示课程用户列表、课程作业列表界面入口，显示更新课程和删除课程按钮 |
| 当前登录的学生未参加/教师未开设此课程 | 仅显示加入课程按钮                                           | 不显示任何其他功能入口，仅展示课程简介                       |

* 课程简介界面路由：`/courses/:id`
* 课程用户列表界面路由：`/courses/:id/users`
* 课程作业列表实际上只需要跳转到作业列表界面并传递特定过滤参数即可，跳转路由：`/homeworks?courseId={courseId}`

### 更新课程

* 路由：`/courses/:id/update`
* 需要以开设了`:id`课程的教师用户登录后，在该课程的详情页面方可看到进入该界面的按钮
* 可以考虑复用创建课程界面的表单，但在更新课程时表单各域的默认值应当是该课程当前的对应数据

### 删除课程

* 需要以开设了`:id`课程的教师用户登录后，在该课程的详情页面方可看到删除课程的按钮
* 首先弹出对话框询问用户是否确认删除课程，确认后再发起课程删除请求。

### 查看课程列表

* 路由：`/courses`
* 对于教师用户，页面应包含创建课程页面的入口
* 可以使用列表组件实现，需要支持分页/搜索/过滤功能，过滤需求如下：
* 搜索：根据课程名称搜索
* 过滤：我的课程与所有课程，对于学生，我的课程指用户参与的所有课程；对于教师，我的课程指教师开设的所有课程

## 作业

作业与课程的区别在于课程对于与其无关（未参加/开设）的用户仍有许多公开信息，并允许这些用户参与课程。对于作业部分，只有课程相关的用户才有访问权限。

|      | 学生         | 教师                         |
| ---- | ------------ | ---------------------------- |
| C    | N/A          | 创建作业，需要指定课程       |
| R    | 查看作业详情 | 查看作业详情                 |
| U    | N/A          | 更改作业设置，如内容、名称等 |
| D    | N/A          | 在作业详情页面增加删除按钮   |
| L    | 查看作业列表 | 查看作业列表                 |

### 创建作业

* 路由：`/homeworks/add`
* 创建作业时需要指定课程，页面应接受路由参数`courseId`，若提供该参数，则在参数合法的情况下将其设为新的作业的课程的默认值（合法：指当前登录的教师用户开设了`courseId`所对应的课程）

### 查看作业详情

* 路由：`/homeworks/:id`
* 不论用户为学生或教师，都包含作业名称、内容、起止时间、分数、附件等信息
* 若当前登录用户为学生，则包含跳转到相应作业的作业提交页面的入口
* 若当前登录用户为教师，则包含跳转到相应作业的作业提交列表页面的入口

### 更改作业设置

* 路由：`/homeworks/:id/update`
* 可以考虑复用创建作业界面的表单，但在更新课程时表单各域的默认值应当是该作业当前的对应数据

### 删除作业

* 以布置了该作业（亦即开设了该作业所对应的课程）的教师登录后，在作业详情页面应看到删除作业按钮
* 需先弹出对话框征求用户确认

### 作业列表

* 路由：`/homeworks`
* 对于教师用户，页面应包含创建作业页面的入口
* 对于学生用户，应能从列表中的某个作业直接跳转到该作业所对应的提交页面，跳转路由：`/homeworks/:id/submit`
* 可以使用列表组件实现，需要支持分页/搜索/过滤功能，过滤需求如下：
* 搜索：根据作业名称搜索
* 过滤：
  * 基于开始/结束时间过滤
  * 基于所属课程过滤

## 作业提交

|      | 学生                                                         | 教师                   |
| ---- | ------------------------------------------------------------ | ---------------------- |
| C    | 创建作业提交                                                 | N/A                    |
| R    | 查看作业提交详情，以及更新已有提交                           | 查看作业提交详情       |
| U    | 若对于一个作业已有一次提交，则在查看提交详情页面可以更新已有的提交 | 批阅作业提交           |
| D    | N/A                                                          | N/A                    |
| L    | N/A（对于单一学生而言，一份作业提交与一份作业一一对应，只需提供作业列表即可） | 查看收到的作业提交列表 |

### 创建作业提交

* 路由：`/homeworks/:id/submit`
* 仅当以学生用户登录，且用户参与了作业所对应的课程时可以访问
* 对于同一学生用户，同一作业仅同时存在一份提交。因此该页面仅当对应的作业提交不存在时方需要要求用户创建作业提交。因为这一设计，该页面在路由逻辑上为`/homeworks`下的子路由

### 查看和更新作业提交（学生）

* 路由：`/homeworks/:id/submit`
* 仅当以学生用户登录，且用户参与了作业所对应的课程时可以访问
* 若当前登录的学生用户已经创建过该作业的提交，则页面应当展示该提交的内容，并显示更新该提交（即重新提交）的功能入口。

### 查看与批阅作业提交（教师）

* 路由：`/submits/:id`
* 仅当以教师用户登录，且该教师布置了该提交所对应的作业时可以访问
* 在查看页面可以跳转到单个提交的批阅页面，路由：`/submits/:id/review`
* 为批阅方便，还应当提供专门的连续批阅页面，路由：`/reviews/:homeworkId`，后端相应接口每次请求时将返回所对应作业的一个作业提交。页面除显示该返回的作业提交供教师批阅外，还应显示一个“保存并批阅下一份”按钮，点击后重新向后端请求新的作业提交，以实现连续批阅功能。

### 作业提交列表

* 路由：`/submits/`
* 仅限教师用户访问
* 可以使用列表组件实现，需要支持分页/搜索/过滤功能，过滤需求如下：
  * 按照作业过滤。在使用按照作业过滤时，应当提供跳转到该作业的连续批阅页面的入口
  * 按照课程过滤

